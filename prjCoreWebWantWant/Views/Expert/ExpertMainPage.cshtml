
@{
    ViewData["Title"] = "ExpertMainPage";
}
@section Styles{
    <style>
        .filter_block{
            background-color: #E5EDF6;
            border: 1px solid #00000026;
            border-radius: 0.375rem;
        padding: 5px;
        margin:10px;
    }
        
    </style>
}

@section subTitle{
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">找專家</li>
            @*<li class="breadcrumb-item">找專家</li>
            <li class="breadcrumb-item " aria-current="page">專家成案紀錄管理</li>*@
        </ol>
    </nav>
}

<div class="row justify-content-center">
    <!--Bootstrap 樣式類：用於創建一個水平的「行」容器、於在「行」容器中使內容水平居中對齊。-->
    <div class="col-3 g-0 ps-2 pe-2 me-4">
        <!--左側搜尋(篩選)-->
        <!--Bootstrap：創建一個佔據父容器 25% 寬度的列，並在左側和右側添加內邊距，同時在右側添加外邊距。-->
        <div class="filter_block ">
            <!--白色的框框，但好像沒套到-->
            <div class="flex-column">
                @* 自訂 ：應該是為了包住搜尋的標籤&搜尋框框，但好像沒套到*@
                <label class="fs-4 pl-2 pt-2">搜尋專家</label>
                <div class="d-flex align-items-center search_container position-relative">
                    <!--為了製作搜尋的輸入框(包含前方小圖&按鈕)-->
                    <!--Bootstrap 樣式：d-flex：啟用 Flexbox 佈局，這將使元素的子元素能夠使用 Flexbox 屬性進行排列。-->
                    <!--Bootstrap 樣式：align-items-center：用於在 Flexbox 容器中將子元素垂直居中對齊。-->
                    <!--自訂 樣式：search_container：但好像沒套到-->
                    <!--Bootstrap 樣式：position-relative：用於將元素的 position 屬性設置為 relative，從而創建相對定位的容器。這允許你在容器內使用絕對定位來放置其他元素。-->
                    <!--實現 Flexbox 佈局、垂直居中對齊，同時創建了一個相對定位的容器-->
                    <i class="fa-solid fa-magnifying-glass me-2"></i>
                    <input type="text" id="inputKeyword" name="txtKeyword" class="search-input" placeholder="搜尋專家">
                    @* 自訂 ：可能要做Form才會送出&好像沒套到*@
                    <button class="btn btn-outline-primary ms-2">查詢</button>
                </div>
            </div>
        </div>
        <!--左側工具列先不要管他-->
        <!--左側技能類別-->
        <div class="filter_block">
            <label class="fs-4 pl-2 pt-2">所有專長類別</label>
            @using (Html.BeginForm())
            {

                <select name="selectCategory" id="skilltypeselect" class="form-select form-select-lg mb-3" aria-label="Large select example">
                </select>
                <select name="selectCategory" id="skillselect" class="form-select form-select-lg mb-3" aria-label="Large select example">
                </select>
            }
        </div>
        <!--左側證照類別-->
        <div class="filter_block">
            <label class="fs-4 pl-2 pt-2">所有證照類別</label>
            <div class="controls-display-row category-click">
                @using (Html.BeginForm())
                {

                    <select id="certificatetypeselect" class="form-select form-select-lg mb-3" aria-label="Large select example">
                    </select>
                    <select id="certificateselect" class="form-select form-select-lg mb-3" aria-label="Large select example">
                    </select>
                }



            </div>
            </div>
        <!--價格篩選-->@*請教亞芝姐怎麼變成同一條的，或是小C叫我用noUiSlider*@
        <div class="filter_block">
            <label class="fs-4 pt-1 form-label" for="customRange1">篩選價格</label>
            <div class="mt-4">
                <section class="range-slider range-container pb-3">
                    <span class="output outputOne pl-1 pr-1"></span>
                    <span class="full-range"></span>
                    <span class="incl-range"></span>
                    <input id="rangeOne" name="ranvgeOne" value="1000" min="0" max="1000" step="1" type="range">
                </section>
                <div class="d-flex justify-content-center">
                    <input id="btn_filter_price" class="btn btn-outline-secondary" type="button" value="搜尋" />
                </div>
            </div>
        </div>
    </div><!--左側工具列結尾-->
    <!--先來做右側工具列-->
    <div class="col-8 g-0 justify-content-end">
        <!--右側的區塊(佔據2/3)-->
        <!--Bootstrap ：g-0：用於在列之間添加間距（gutter），此時無間距-->
        <!--Bootstrap ：justify-content-end：用於對 Flexbox 容器中的內容進行水平對齊。此時對齊到容器的右側-->
        <div class="row g-0">
            <!--目前第一區橫條-->
            <div class="col-12 filter_block ms-0">
                @*filter_block好像沒套到*@
                <div class="divide-line pl-3">
                    <!--專門顯示數字的第一行-->
                    @*divide-line好像沒套到*@
                    <!--Bootstrap ：pl-3：在元素的左側添加內邊距（padding-left），3單位-->
                    <span id="total" class="fs-3 fw-bolder ms-2 me-2">@*Model.filterProducts.Count()找計數(先寫死)*@3</span>
                    <!--Bootstrap ：me-2：用於在元素的右側添加外邊距（margin end）-->
                    @*fs-3 fw-bolder好像沒套到*@
                    <span class="fs-5 my-text-primary">
                        @*fs-5 my-text-primary好像沒套到*@
                        @*<img src="~/icons/icons8-rhombus-loader.gif" class="d-none loading-icon" />如果沒跑出來時的動畫，需要配合jQuery寫法*@
                        位專家，即刻為您報價
                    </span>
                    <div id="selected-checkboxes">
                        <!--這裡在放被選取的類別-->
                        <input type="button" class="btn btn-secondary d-none cleanAll mr-1" value="清除全部" onclick="clearAllFiltered()" />
                        <!--點擊後產生clearAllFiltered()事件-->
                        <!--btn-secondary：這個樣式類表示按鈕的次要風格，通常是灰色或其他次要顏色。
                        d-none：這個樣式類將元素設置為不可見，即隱藏元素。這可能是根據某些條件來動態顯示或隱藏按鈕。
                        cleanAll：這可能是自定義的樣式類，用於定義按鈕的其他風格屬性，通常在 CSS 中定義。
                        mr-1：這個樣式類表示按鈕的右邊外邊距（margin right）為 1 單位（可能是像素或其他度量單位）。-->
                    </div>
                </div>
                <div class="sort d-flex align-items-center fs-6 my-text-primary pl-3">
                    <!--sort：這可能是自定義的樣式類，用於定義元素的特定風格，可能在你的 CSS 樣式表中進行了定義。
                    d-flex：這是 Bootstrap 樣式類，用於將元素的 display 屬性設置為 flex，啟用 Flexbox 佈局。這將使元素的子元素能夠使用 Flexbox 屬性進行排列。
                    align-items-center：這是 Bootstrap 樣式類，用於在 Flexbox 容器中將子元素垂直居中對齊。這將應用 Flexbox 的 align-items 屬性，並將對齊方式設置為 center。
                    fs-6：這可能是一個用於設定文字字號（font size）的樣式類。fs-6 可能表示較小的文字字號，具體的數字可能會因所使用的框架或自定義樣式而有所不同。
                    my-text-primary：這可能是自定義的樣式類，用於定義文字顏色。通常，my-text-primary 意味著它會設定文字為主要的文本顏色，這可能在你的 CSS 樣式表中進行了定義。
                    pl-3：這是 Bootstrap 樣式類，用於在元素的左側添加內邊距（padding-left）。pl-3 表示左側內邊距為 3 單位，具體的單位可能是像素或其他度量單位，這也會因框架或自定義樣式而有所不同。
                    -->
                    <span class="fw-bolder ms-2">排序 : </span>
                    <span>　</span>
                    <a id="sortByHot" href="#" class=" fw-bolder" name="status">熱門程度</a>
                    <span>　|　</span>
                    <a id="sortByCommet" href="#" class=" fw-bolder" name="status">用戶評價</a>
                    <span>　|　</span>
                    <a id="sortByPrice" href="#" class=" fw-bolder" name="status">價格排序(低到高)</a>
                </div>

            </div>
            @*載不出來的話會有載入中的gif，要做嗎？*@
            <!--<div class="alert alert-light d-none">
                <img src="~/icons/icons8-rhombus-loader.gif" class="loading-icon" />
            </div>-->
        </div>
        <!--第一區橫條結束-->
        <div id="filterBody">
            <div id="sortBody">
                @*接下來開始做很多個區塊*@
                    @* asp-action="Product" asp-controller="Program" asp-route-id="@item.productID" *@
                    <div class="card mb-3 col-12 p-0">
                        <div class="row g-0">
                            <div class="col-md-4 pr-0 ">
                                <!--放圖片-->
                                <div class="overflow-hidden my-rounded-start d-flex justify-content-center" style="background:#408080	">
                                    <img src="~/img/任務曝光.png" height="250" />
                                </div>
                                @*if (item.photo != null)
                                {
                                    <div class="overflow-hidden my-rounded-start d-flex justify-content-center" style="background:#408080	">
                                        <img src="data:image/jpg;base64,@Convert.ToBase64String(item.photo)" height="250" />
                                    </div>
                                }

                                else
                                {
                                    <div class="overflow-hidden my-rounded-start my-bg-primary d-flex justify-content-center">
                                        <img src="~/icons/logos/Logo_traveldate.png" alt="@item.productName" height="250" />
                                    </div>
                                }
                                *@
                            </div>
                            <div class="col-md-8 pl-0">
                                <div class="card-body d-flex justify-content-around row">
                                    <div class="pl-4 pr-4">
                                        <span class="card-title">@*Html.DisplayFor(modelItem => item.productName)*@專家的名字</span>
                                    <a href="@Url.Content("~/Backstage/ResumeEdit")" class="btn btn-primary btn-sm me-2" id="btnEdit" style="float:right">編輯</a>
                                    <a href="@Url.Action("", "", new {})" class="btn btn-danger btn-sm me-2" style="float:right" onclick="return confirm('確定要刪除嗎?')">刪除</a>
                                        <p class="card-text  mb-2">@*Html.DisplayFor(modelItem => item.outlineForSearch)*@專家的詳細介紹，這次可以多放一點字ㄌ </p>
                                        <p class="card-text">
                                            <small class="text-body-secondary">@*Html.DisplayFor(modelItem => item.date)*@ 可以放個證照好了</small>
                                            <small class="text-body-secondary"> | <i class="fa-solid fa-location-dot"></i>@*<img src="~/icons/icons8-position-16.png">*@@*Html.DisplayFor(modelItem => item.city)*@ 台北市北投區</small>
                                        </p>
                                    </div>
                                    <div class="row align-items-end">
                                        <div class="col-8 d-flex align-items-center">
                                            <div class="rectangle-container me-2 d-flex position-relative">
                                                <div class="rectangle"></div>
                                                <img class="star-rating" src="~/icons/star-rating.png">
                                                <input type="hidden" id="rating-value" value="4.0">@*value="item.commentAvgScore"*@
                                            </div>
                                            <small class="text-body-secondary">@*Html.DisplayFor(modelItem => item.strComment)*@AAA</small>
                                            <small class="text-body-secondary"> | @*salesCount*@5</small>
                                        </div>
                                        <div class="col">
                                            <p class="card-text fs-5 fw-bolder text-end"><span>TWD </span>@*Html.DisplayFor(modelItem => item.price)*@6800<span class="fs-6 fw-normal">起</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                <!--範例二開始(以下請刪除)-->
                <a class="text-secondary">
                    @* asp-action="Product" asp-controller="Program" asp-route-id="@item.productID" *@
                    <div class="card mb-3 col-12 p-0">
                        <div class="row g-0">
                            <div class="col-md-4 pr-0 ">
                                <!--放圖片-->
                                <div class="overflow-hidden my-rounded-start d-flex justify-content-center" style="background:#408080	">
                                    <img src="~/img/任務曝光.png" height="250" />
                                </div>
                                @*if (item.photo != null)
                                {
                                <div class="overflow-hidden my-rounded-start d-flex justify-content-center" style="background:#408080	">
                                <img src="data:image/jpg;base64,@Convert.ToBase64String(item.photo)" height="250" />
                                </div>
                                }

                                else
                                {
                                <div class="overflow-hidden my-rounded-start my-bg-primary d-flex justify-content-center">
                                <img src="~/icons/logos/Logo_traveldate.png" alt="@item.productName" height="250" />
                                </div>
                                }
                                *@
                            </div>
                            <div class="col-md-8 pl-0">
                                <div class="card-body d-flex justify-content-around row">
                                    <div class="pl-4 pr-4">
                                        <h5 class="card-title">@*Html.DisplayFor(modelItem => item.productName)*@專家的名字</h5>
                                        <p class="card-text  mb-2">@*Html.DisplayFor(modelItem => item.outlineForSearch)*@專家的詳細介紹，這次可以多放一點字ㄌ </p>
                                        <p class="card-text">
                                            <small class="text-body-secondary">@*Html.DisplayFor(modelItem => item.date)*@ 可以放個證照好了</small>
                                            <small class="text-body-secondary"> | <i class="fa-solid fa-location-dot"></i>@*<img src="~/icons/icons8-position-16.png">*@@*Html.DisplayFor(modelItem => item.city)*@ 台北市北投區</small>
                                        </p>
                                    </div>
                                    <div class="row align-items-end">
                                        <div class="col-8 d-flex align-items-center">
                                            <div class="rectangle-container me-2 d-flex position-relative">
                                                <div class="rectangle"></div>
                                                <img class="star-rating" src="~/icons/star-rating.png">@*這裡要放星星(靠前輩了)*@
                                                <input type="hidden" id="rating-value" value="4.0">@*value="item.commentAvgScore"*@
                                            </div>
                                            <small class="text-body-secondary">@*Html.DisplayFor(modelItem => item.strComment)*@AAA</small>
                                            <small class="text-body-secondary"> | @*salesCount*@5</small>
                                        </div>
                                        <div class="col">
                                            <p class="card-text fs-5 fw-bolder text-end"><span>TWD </span>@*Html.DisplayFor(modelItem => item.price)*@6800<span class="fs-6 fw-normal">起</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
                <!--範例二結束(以上請刪除)-->
            </div>
            <!--製作頁數之類的東西，但沒有很懂-->
            <div class="d-flex justify-content-center bg-transparent border-0">
                <div class="col-7 d-flex justify-content-around">
                    頁數的位置
                    @*Html.PagedListPager(Model.pages, page => Url.Action("SearchList", new { page}))*@
                </div>
            </div>
        </div>

    </div>
</div>

@section Scripts{
    
        @*將選取價格的滑塊連在一起*@
        <script>
        //專長：載入下拉式選單
        const skilltypeselect = document.querySelector('#skilltypeselect');
        const skillselect = document.querySelector('#skillselect');
        const certificatetypeselect = document.querySelector('#certificatetypeselect');
        const certificateselect = document.querySelector('#certificateselect');

        document.addEventListener('DOMContentLoaded', function () {

            Loadskilltype();
            Loadcertificatetype();

            skilltypeselect.addEventListener('change', function () {
                Loadskill();
            });

            certificatetypeselect.addEventListener('change', function () {
                Loadcertificate();
            });
        });

        //專長大項資料來
        function Loadskilltype() {
            fetch('@Url.Content("~/ApiForExpert/SkillTyptAPI")')
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    let options = "<option>請選擇專長</option>";
                    options += data.map(skilltype => `<option value="1">${skilltype}</option>`).join('');

                    skilltypeselect.innerHTML = options;
                });  //then最後一個THEN
        };



        function Loadskill() {
            const skilltypeselecttext = skilltypeselect.options[skilltypeselect.selectedIndex].text;
            console.log(skilltypeselecttext);
            if (skilltypeselecttext == "請選擇專長" || skilltypeselecttext == null) {
                skillselect.innerHTML = "<option value=''>請先選擇專長</option>";
                return;
            }
            fetch(`@Url.Content("~/ApiForExpert/SkillAPI")?skilltype=${skilltypeselecttext}`)
                .then(response => response.json())
                .then(datas => {
                    let options = ""
                    options += datas.map(skill => `<option value="1">${skill}</option>`).join('');
                    skillselect.innerHTML = options;
                });  //then最後一個THEN
        };
        /*Loadskilltype();*///使用載入資料

            //證照大項資料來
            function Loadcertificatetype() {
                fetch('@Url.Content("~/ApiForExpert/CertificateTypeAPI")')
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    let options = "<option>請選擇證照</option>";
                    options += data.map(certificatetype => `<option value="1">${certificatetype}</option>`).join('');

                        certificatetypeselect.innerHTML = options;
                    });  //then最後一個THEN
            };



            function Loadcertificate() {
                const certificatetypeselecttext = certificatetypeselect.options[certificatetypeselect.selectedIndex].text;
                console.log(certificatetypeselecttext);
            if (certificatetypeselecttext == "請選擇證照" || certificatetypeselecttext == null) {
                certificateselect.innerHTML = "<option value=''>請先選擇證照</option>";
                    return;
                }
                fetch(`@Url.Content("~/ApiForExpert/CertificateAPI")?certificatetype=${certificatetypeselecttext}`)
                    .then(response => response.json())
                    .then(datas => {
                        let options = ""
                        options += datas.map(certificate => `<option value="1">${certificate}</option>`).join('');
                        certificateselect.innerHTML = options;
                    });  //then最後一個THEN
            };
                                /*Loadcertificatetype();*///使用載入證照資料

        </script>
}