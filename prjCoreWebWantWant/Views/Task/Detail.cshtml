@model prjCoreWebWantWant.Models.CTaskWrap
@{
    ViewData["Title"] = "Detail";
    Layout = "~/Views/Shared/_Layout_Task.cshtml";
}
<head>
  
    <style>

      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous" />
        
    </style>
</head>


<main>



    <div class="job-post-company pt-120 pb-120">
        <div class="container">
            <div class="row justify-content-between">
                <!-- Left Content -->
              
                <div class="col-xl-7 col-lg-8">
                    <div class="job-tittle mb-50">
                        <div class="small-section-tittle">
                        <h4>任務名稱</h4>
                        </div>
                        <p>@Model.FTitle</p>
                    </div>

                    <div class="job-post-details">
                        <div class="post-details1 mb-50">
                            <!-- Small Section Tittle -->
                            <div class="small-section-tittle">
                                <h4>任務詳細資料</h4>
                            </div>
                            <p>@Model.FDetail</p>
                        </div>
                        <div class="post-details2  mb-50">
                            <!-- Small Section Tittle -->
                            <div class="small-section-tittle">
                                <h4>任務所需技能</h4>
                            </div>
                            <ul>
                                <li></li>
                                <li></li>
                                <li></li>
                                <li></li>
                                <li></li>
                            </ul>
                        </div>
                        <div class="post-details2  mb-50">
                            <!-- Small Section Tittle -->
                            <div class="small-section-tittle">
                                <h4>其他需求條件</h4>
                            </div>
                            <ul>
                                <li></li>
                                <li></li>
                                <li></li>
                                <li></li>
                                <li></li>
                            </ul>
                        </div>


                        <div class="post-details2  mb-50">
                            <!-- Small Section Tittle -->
                            <div class="small-section-tittle">
                                <h4>任務相關照片</h4>
                            </div>
                            <img src="" class="img-thumbnail" alt="...">
                        </div>
                    </div>
                </div>
                

                <!-- Right Content -->
                <div class="col-xl-4 col-lg-4">
                    <div class="post-details3  mb-50">
                        <!-- Small Section Tittle -->
                        <div class="small-section-tittle">
                            <h4>Job Overview</h4>
                        </div>
                        <ul>
                            <li>刊登日期：<span>@Model.FPublishStart</span></li>
                            <li>任務地點：<span>@Model.FAddress</span></li>
                            <li>需求人數<span>@Model.FRequiredNum</span></li>
                            <li>任務時段：<span>@Model.FTaskStartHour ~ @Model.FTaskEndHour</span></li>
                            <li>任務報酬：<span>@Model.FPayFrom</span></li>
                            <li>刊登日期：<span>@Model.FPublishStart</span></li>
                        </ul>
                        <div class="apply-btn2" style="display: flex; justify-content: center; align-items: center; width:200px; height:35px; border-radius: 50px;background-color:#528EAF;color:white">
                            @*<a href="#" class="btn">立即應徵</a>*@
                            @*  <a href="@Url.Action("Apply", new { id=Model.FId })" target="_blank">詳細資訊</a>*@
@*                            <a href="@Url.Action("Apply", new { id = Model.FId })" target="_blank" id="myInput">立即應徵</a>*@
                          @*<a href="#" data-bs-toggle="modal" data-bs-target="#myModal" id="myInput">立即應徵</a>*@
<<<<<<< HEAD
=======
                            <a href="#" id="applyButton" class="btn btn-outline-primary">立即應徵</a>
>>>>>>> bb974ea388072b88bde48dea4c8088d851d84bc9


                          @inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
                            @{
                                if (HttpContextAccessor.HttpContext.Session.Keys.Contains(CDictionary.SK_LOGINED_USER))
                                {
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#myModal" id="applyNow">立即應徵</a>
                                }
                                else
                                {
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#myModal" id="NoLogin">立即應徵</a>
                                }
                            }
                        </div>                     
                    </div>

                    @*應徵按鈕下方的公司資訊*@
                    <div class="post-details4  mb-50">
                        <!-- Small Section Tittle -->
                        <div class="small-section-tittle">
                            <h4>刊登者資訊</h4>
                        </div>
                        <span>aa</span>
                        <p></p>
                        <ul>aa
                            <li>刊登案主：<span>@Model.FAccountID</span></li>
                            <li>Web : <span> bb</span></li>
                            <li>Email: <span>cc</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
  
    @*點選立即應徵之後的modal*@      
    <div class="modal" tabindex="-1" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">請選擇履歷</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    @*履歷一*@
                    <div class="col">
                            <div class="card h-100">                           
                            <div class="card-body" width="300px">
                                <h4 class="card-title text-center" style="color:#528EAF">第一份履歷</h4>
                                <hr />
                              
                                <p class="card-text">
                                        您好！我是王小華，個性溫和，喜歡與人交談。專長領域在於商務開發與專案管理，希望有機會承接此份工作。
                                    </p>    
                                      <div class="card-footer text-center">
                                    <form action="@Url.Content("~/Task/List")" method="post">
                                        <!-- 使用表單元素包裹 -->
                                        <input onclick="Alert()"
                                               class="btn btn-primary"
                                               style="background-color: #528EAF"
                                               type="submit"
                                               value="以此履歷應徵" />
                                    </form>
                                    </div>                                
                            </div>
                             </div>
                    </div>
                    <p></p>

                    @*履歷二*@
                    <div class="col">
                        <div class="card h-100">
                            <div class="card-body" width="300px">
                                <h4 class="card-title text-center" style="color:#528EAF">第二份履歷</h4>
                                <hr />
                                <p class="card-text">
                                    您好！I'm John，有5年以上工作經驗，精通中文、德文、英文，若能錄取是我的榮幸！
                                </p>
                            </div>
                            <div class="card-footer text-center">
                                <form action="@Url.Content("~/Task/List")" method="post">
                                    <!-- 使用表單元素包裹 -->
                                    <input onclick="Alert()"
                                           class="btn btn-primary"
                                           style="background-color: #528EAF"
                                           type="submit"
                                           value="以此履歷應徵" />
                                </form>
                            </div>
                        </div>
                    </div>
                    <p></p>

                    @*履歷三*@
                    <div class="col">
                        <div class="card h-100">
                            <div class="card-body" width="300px">
                                <h4 class="card-title text-center" style="color:#528EAF">第三份履歷</h4>
                                <hr />
                                <p class="card-text">
                                    您好！我是王小華，畢業於東吳大學資工系，會c、c++、python，閒暇時會獨立接案，將客戶要求做到最好。
                                </p>
                            </div>
                            <div class="card-footer text-center">
                                <form action="@Url.Content("~/Task/List")" method="post">
                                    <!-- 使用表單元素包裹 -->
                                    <input onclick="Alert()"
                                           class="btn btn-primary"
                                           style="background-color: #528EAF"
                                           type="submit"
                                           value="以此履歷應徵" />
                                </form>
                            </div>
                        </div>
                    </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消應徵</button>
                    @*<button type="button" class="btn btn-primary">立即應徵</button>*@
                </div>
               
            </div>
        </div>
    </div>
    </div>
 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>


</main>

@section Styles{
    <style>
    
        
    </style>

}

@section Scripts{
    <script>

            const myModal = document.querySelector('#myModal');
            const myInput = document.querySelector('#myInput');

            myModal.addEventListener('show', function () {
            myModal.show();

            <script src="https://code.jquery.com/jquery-3.6.0.min.js" ></script> <!-- 引入 jQuery -->
   
        document.addEventListener("DOMContentLoaded", function () {
            var applyButton = document.getElementById("applyButton");
            applyButton.addEventListener("click", function (event) {
                event.preventDefault();

                $.ajax({
                    url: "/Task/IsUserLoggedIn",
                    type: "POST",
                    success: function (result) {
                        if (result) {
                            // 使用者已登入，顯示模態框
                            var myModal = new bootstrap.Modal(document.getElementById("myModal"));
                            myModal.show();
                        } else {
                            // 使用者未登入，導向登入頁面
                            window.location.href = "~/View/Member/Login"; // 替換為你的登入頁面 URL
                        }
                    }
                });
            });
        });
    


        })

        const applyNow = document.querySelector('#applyNow');
        const NoLogin = document.querySelector('#NoLogin')

        applyNow.addEventListener('click', () => {
            Swal.fire({
                icon: 'warning',
                title: '您還沒有登入',
                text: '請先登入帳號',
            })
        })


    </script>

    
}
