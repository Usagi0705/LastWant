@model prjCoreWebWantWant.ViewModels.CRatingCreatViewModel

@{
    ViewData["Title"] = "評價";
    Layout = "~/Views/Member/LayoutForMem.cshtml";
}
@section subTitle{
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">會員專區</li>
            <li class="breadcrumb-item">找專家</li>
            <li class="breadcrumb-item">專家成案紀錄管理</li>

            <li class="breadcrumb-item " aria-current="page">新增評分</li>
           
        </ol>
    </nav>
}

<div class="row">
    <div class="col-md-4">
        <form asp-action="CreateNew" enctype="multipart/form-data" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div><button type="button" id="demo" class="btn btn-outline-primary">DEMO給專家</button></div>

            <div class="form-group">
                <label asp-for="委託者" class="control-label"></label>
                <input readonly asp-for="委託者" class="form-control" />
                <span asp-validation-for="委託者" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="專家" class="control-label"></label>
                <input readonly asp-for="專家" class="form-control" />
                <span asp-validation-for="專家" class="text-danger"></span>
                <input hidden asp-for="taskid" class="form-control" />
            </div>
            
            <div class="form-group">
                <div class="rating-box">
                    <label asp-for="評論星數" class="control-label"></label>
                    <span class="rating-value" id="ratingvalue">你要打幾分?</span>
                    <div class="rating">
                        
                        <span class="fa fa-star-o"></span>
                        <span class="fa fa-star-o"></span>
                        <span class="fa fa-star-o"></span>
                        <span class="fa fa-star-o"></span>
                        <span class="fa fa-star-o"></span>
                    </div>
                </div>
                
                <input hidden asp-for="評論星數" id="starscore" class="form-control" />
                <span asp-validation-for="評論星數" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="評論內容" class="control-label"></label>
                <textarea id="democontent" asp-for="評論內容" class="form-control " style="height:350px;resize:none"></textarea>
                <span asp-validation-for="評論內容" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="評論日期" class="control-label"></label>
                <input asp-for="評論日期" class="form-control" />
              <span asp-validation-for="評論日期" class="text-danger"></span>
            </div>
            <input asp-for="評論日期" class="form-control " hidden />
            <div class="row">
            <div class="form-group col-5">
                <input type="submit" value="新增" class="btn btn-outline-primary" />

            </div>
                <div class="col-5 ">
                    <a asp-action="ExpertListnew" asp-controller="ExpertTask" class="btn btn-outline-primary">取消</a>
            </div>
            </div>
        </form>
    </div>
</div>
@section Styles {
    <style>
    .rating .fa {
    color: tomato;
    font-size:larger;
     }
    </style>
}
@section Scripts {
    <script>
        const stars = document.querySelector(".rating").children;
        const starscore = document.querySelector("#starscore");
        const ratingvalue = document.querySelector("#ratingvalue");

        let index = -1; // 初始化為-1，表示沒有選擇評分

        for (let i = 0; i < stars.length; i++) {
            stars[i].addEventListener("mouseover", function () {
                for (let j = 0; j < stars.length; j++) {
                    stars[j].classList.remove("fa-star");
                    stars[j].classList.add("fa-star-o");
                }
                for (let j = 0; j <= i; j++) {
                    stars[j].classList.remove("fa-star-o");
                    stars[j].classList.add("fa-star");
                }
                ratingvalue.innerHTML = "正在打分數";
            });

            stars[i].addEventListener("click", function () {
                index = i;
                ratingvalue.innerHTML = "你打的分數是 " + (index + 1);
                starscore.value = index + 1;
            });

            stars[i].addEventListener("mouseout", function () {
                for (let j = 0; j < stars.length; j++) {
                    stars[j].classList.remove("fa-star");
                    stars[j].classList.add("fa-star-o");
                }
                for (let j = 0; j <= index; j++) {
                    stars[j].classList.remove("fa-star-o");
                    stars[j].classList.add("fa-star");
                }
                if (index !== -1) {
                    ratingvalue.innerHTML = "你打的分數是 " + (index + 1);
                } else {
                    ratingvalue.innerHTML = "你要打幾分?";
                }
            });
        }
        document.querySelector("#demo").addEventListener("click", function () {
            console.log("123");
            var democontent = document.querySelector("#democontent");
            democontent.value = "在眾多的編織項鍊製作者中，這位師傅無疑是最傑出的一位。從我首次接觸他的作品照片和介紹開始，就深深被他的技藝和對細節的熱愛吸引。當我收到項鍊時，我被它的美麗和細緻完全震撼了。每顆珠寶的搭配都充滿了心思，完美地展現了我母親的優雅氣質。\n\n" +
                "更為值得稱讚的是，師傅不僅僅只是完成了一個訂單，他還賦予了項鍊生命和故事。我母親非常喜歡，每次戴著它，都仿佛帶著師傅的祝福和良好的意願。\n\n" +
                "我強烈推薦這位師傅給所有想要一件特別和有意義的珠寶的人。他不僅僅是一名優秀的工匠，更是一名真正理解客戶需求和情感的藝術家。\n\n" +

        });
    </script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
